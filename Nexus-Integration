
ğŸš€ Nexus Repository Integration â€“ Stepâ€‘byâ€‘Step Guide
This section explains how to integrate Nexus Sonatype Repository with Jenkins Pipeline to store versioned build artifacts.


ğŸ— Why Nexus Repository?
Nexus is a software repository manager used to:

Store build artifacts (WAR, JAR, ZIP, etc.)
Store package formats (Maven, APT, Npm, Yum, Docker, NuGet)
Retrieve dependencies for builds
In our pipeline, we use Nexus as a central artifact store.


ğŸ”§ Step 1 â€” Set Up Nexus Repository
1ï¸âƒ£ Login to Nexus

Access Nexus via: http://<NEXUS_PUBLIC_IP>:8081
Login with admin credentials (set during installation)
2ï¸âƒ£ Create Maven Hosted Repository

Go to Settings â†’ Repositories
Click Create repository
Choose Maven (hosted)
Name it:
vprofile-repo




Click Create repository
âœ” This repository will store all WAR artifacts uploaded from Jenkins.


ğŸ” Step 2 â€” Add Nexus Credentials in Jenkins
You must add Nexus login details for Jenkins to upload the artifact.
Steps:

Go to Jenkins Dashboard â†’ Manage Jenkins
Click Credentials â†’ System â†’ Global Credentials
Click Add Credentials
Choose Username with password
Enter:Username: admin
Password: <YOUR_NEXUS_PASSWORD>
ID: nexuslogin
Description: nexuslogin
Save
âœ” Use this credential ID inside the pipeline.


ï¿½ Step 23â€” Add Nexus Upload Stage to the Pipeline
Below is the complete Nexus upload stage using the Nexus Artifact Uploader plugin.
ğŸ“Œ Pipeline Stage
stage('Upload Artifact to Nexus') {
    steps {
        nexusArtifactUploader(
            nexusVersion: 'nexus3',
            protocol: 'http',
            nexusUrl: '<NEXUS_PRIVATE_IP>:8081',
            groupId: 'QA',
            version: "${env.BUILD_ID}-${env.BUILD_TIMESTAMP}",
            repository: 'vprofile-repo',
            credentialsId: 'nexuslogin',
            artifacts: [
                [
                    artifactId: 'vpro-app',
                    classifier: '',
                    file: 'target/vprofile-v2.war',
                    type: 'war'
                ]
            ]
        )
    }
}



ğŸ’¡ Notes:

env.BUILD_ID â†’ Jenkins build number
env.BUILD_TIMESTAMP â†’ Requires Build Timestamp Plugin enabled
file: â†’ Path to generated WAR file in the workspace
repository: â†’ Must match the repository name created in Nexus


â³ Step 4 â€” Enable Build Timestamp (Required for Versioning)

Go to Manage Jenkins â†’ Configure System
Find Build Timestamp
Enable it
Set pattern:



yyMMdd_HH-mm




Save
âœ” This ensures every upload produces a unique version in Nexus.


ï¿½ Step 5 â€” Run the Pipeline & Verify Artifacts
After running your Jenkins pipeline:

Go to Nexus â†’ Browse
Open repository: vprofile-repo
You should see folders like:
45-240122_10-30/
   46-240122_10-45/
   47-240122_11-00/




Inside each folder:
vpro-app-<buildid>-<timestamp>.war



Every pipeline run generates a new versioned artifact.


ğŸ†— Troubleshooting
â— Job stuck on â€œWaiting for next available executorâ€
Cause: Jenkins node out of disk space.
Fix:
cd /var/lib/jenkins/workspace
rm -rf *
systemctl restart jenkins



â— Upload fails â€” Could not transfer artifact

Check private IP of Nexus
Confirm port 8081 is open between Jenkins and Nexus
Ensure correct repository name


ğŸ“š Useful References

Nexus Artifact Uploader Plugin Docs
Jenkins Pipeline Syntax Docs: https://www.jenkins.io/doc/book/pipeline/
Nexus Repository Manager Docs
